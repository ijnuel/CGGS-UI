<div class="p-6">
  <div class="flex justify-between items-center mb-4">
    <h3 class="text-xl font-semibold">Program Types</h3>
    <div class="flex gap-2">
      <button mat-raised-button color="primary" (click)="onRefresh()" class="flex items-center">
        <mat-icon>refresh</mat-icon>
        <span>Refresh</span>
      </button>
      <button mat-raised-button color="accent" routerLink="create" class="flex items-center">
        <mat-icon>add</mat-icon>
        <span>Create New</span>
      </button>
    </div>
  </div>


  @if ( { loading: loading$ | async,
  programTypeAll: programTypeAll$ | async,
  classLevelAll: classLevelAll$ | async,
  classAll: classAll$ | async,
  classSubjectAll: classSubjectAll$ | async,
  classSubjectAssessmentAll: classSubjectAssessmentAll$ | async,
  subjectAll: subjectAll$ | async,
  schoolTermSessionAll: schoolTermSessionAll$ | async
  }; as obs ) {
  <div class="flex justify-end items-center">
    <mat-form-field [appLoadingSpinner]="obs.loading && !obs.schoolTermSessionAll">
      <mat-label>Session/Term</mat-label>
      <mat-select [formControl]="schoolTermSessionControl" (selectionChange)="onSessionTermChange($event.value)">
        @for (sessionTerm of obs.schoolTermSessionAll; track $index) {
        <mat-option [value]="sessionTerm.id">
          {{ sessionTerm.session }}, {{ sessionTerm.termString }} Term</mat-option>
        }
      </mat-select>
    </mat-form-field>
  </div>
  <app-program-setup-level-panel [items]="programTypeAllSnapShot" [levelType]="programTypeConfig.label"
    [config]="programTypeConfig" [addFormVisibleFor]="addFormVisibleFor" [visibleFormIsEdit]="visibleFormIsEdit" [loading]="(loading$ | async) ?? false"
    (edit)="onPanelEdit($event)" (delete)="onPanelDelete($event)" (add)="onPanelAdd($event)"
    (refresh)="onPanelRefresh($event)" (showAddForm)="onPanelShowAddForm($event)"
    (hideAddForm)="onPanelHideAddForm($event)" (submit)="onPanelSubmit($event)">
    <!-- You can use ng-template or ng-content for custom form fields if needed -->
  </app-program-setup-level-panel>
  }
  @else {
  <app-table-loader></app-table-loader>
  }


</div>