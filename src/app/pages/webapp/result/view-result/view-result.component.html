<div class="p-6">
  <div class="flex items-center justify-between mb-6">
    <h2 class="text-2xl font-bold text-gray-800">View Results</h2>
  </div>

  <div class="bg-white rounded-lg shadow-md p-6">
    <form [formGroup]="viewResultForm" class="space-y-6">
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <mat-form-field>
          <mat-label>School Term Session</mat-label>
          <mat-select formControlName="schoolTermSessionId" required>
            <mat-option *ngFor="let session of schoolTermSessions$ | async" [value]="session.id">
              {{ session.session }}, {{ session.termString }} Term
            </mat-option>
          </mat-select>
          <mat-error *ngIf="formControl.schoolTermSessionId?.hasError('required')">
            School term session is required
          </mat-error>
        </mat-form-field>

        <app-searchable-mat-select
          [options]="(classes$ | async) ?? []"
          label="Class"
          placeholder="Select Class"
          [labelKeys]="['description']"
          valueKey="id"
          [formControl]="formControl.classId">
        </app-searchable-mat-select>

        <mat-checkbox formControlName="hideOverallPosition">Hide Overall Position</mat-checkbox>
        <mat-error *ngIf="formControl.hideOverallPosition?.hasError('required')">
          Hide overall position is required
        </mat-error>
      </div>
    </form>

    <div class="flex items-center justify-end mt-6">
      <button
        mat-raised-button
        color="primary"
        class="px-6 py-2 flex items-center"
        (click)="generateResult()"
        [disabled]="viewResultForm.invalid || (generating$ | async)">
        <mat-spinner *ngIf="generating$ | async" diameter="20" class="mr-2"></mat-spinner>
        <mat-icon *ngIf="!(generating$ | async)" class="mr-2">picture_as_pdf</mat-icon>
        {{ (generating$ | async) ? '' : 'Generate Result' }}
      </button>
    </div>
  </div>
</div>

